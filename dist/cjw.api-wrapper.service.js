!function(){"use strict";function APIUrlProvider(){var _url;this.setUrl=function(value){_url=value},this.$get=function(){return{url:_url}}}function APIWrapperService($log,$http,$cacheFactory,$q,apiUrl){function formatDefaultHeaders(headers){var _formatted=headers||{};return _formatted["Content-Transfer-Encoding"]="utf-8",_formatted}function query(method,endpoint,params,headers,clearCache){$log.debug({method:method,endpoint:endpoint,params:params,headers:headers,clearCache:clearCache});var deferred=$q.defer();void 0!==_url&&null!==_url||deferred.reject("APIWrapperService.query() -> NO API Url Set!");var config={method:method,url:_url+endpoint,cache:!0,headers:headers};return method==_methods.GET?config.params=params:config.data=params,$http(config).then(function(response){return deferred.resolve(response.data)},function(error){return $log.error("CJWAPIWrapperService.query() -> ",config,endpoint,"clearCache:",clearCache,"error:",error),deferred.reject(error)}),deferred.promise}var _methods={GET:"GET",POST:"POST",DELETE:"DELETE",PUT:"PUT"},_url=apiUrl.url,service={};return service.get=function(endpoint,params,headers,clearCache){if(clearCache===!0&&params){var httpCache=$cacheFactory.get("$http"),getParams="?";for(var key in params)getParams=getParams+key+"="+params[key];httpCache.remove(_url+endpoint+getParams)}return query(_methods.GET,endpoint,params,formatDefaultHeaders(headers),clearCache||!1)},service.post=function(endpoint,params,headers,clearCache){return query(_methods.POST,endpoint,params,formatDefaultHeaders(headers),clearCache||!1)},service["delete"]=function(endpoint,params,headers,clearCache){var _headers=formatDefaultHeaders(headers);return params&&(_headers["Content-Type"]="application/json;charset=utf-8"),query(_methods.DELETE,endpoint,params,_headers,clearCache||!1)},service.put=function(endpoint,params,headers,clearCache){return query(_methods.PUT,endpoint,params,formatDefaultHeaders(headers),clearCache||!1)},service.url=function(){return _url},service}angular.module("cjwApiWrapper",[]).provider("apiUrl",[APIUrlProvider]).factory("apiWrapper",["$log","$http","$cacheFactory","$q","apiUrl",APIWrapperService])}();