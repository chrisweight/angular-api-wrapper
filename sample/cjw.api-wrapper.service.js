!function(){"use strict";function APIUrlProvider(){var _url;this.setUrl=function(value){_url=value},this.$get=function(){return{url:_url}}}function APIWrapperService($log,$http,$cacheFactory,$q,apiUrl){function query(method,endpoint,params,headers,clearCache){var deferred=$q.defer();if(void 0!==_url&&null!==_url||deferred.reject("APIWrapperService.query() -> NO API Url Set!"),void 0===headers&&(headers={}),headers["Content-Transfer-Encoding"]="utf-8",clearCache===!0){var httpCache=$cacheFactory.get("$http"),getParams="";if(method===_methods.GET&&params){getParams="?";for(var key in params)getParams=getParams+key+"="+params[key]}httpCache.remove(_url+endpoint+getParams)}var config={method:method,url:_url+endpoint,cache:!0,headers:headers};switch(method){case _methods.GET:config.params=params;break;default:config.data=params}return $http(config).then(function(response){return deferred.resolve(response.data)},function(error){return $log.error("CJWAPIWrapperService.query() -> ",config,endpoint,"clearCache:",clearCache,"error:",error),deferred.reject(error)}),deferred.promise}var _methods={GET:"GET",POST:"POST",DELETE:"DELETE",PUT:"PUT"},_url=apiUrl.url,service={};return service.get=function(endpoint,params,headers,clearCache){return query(_methods.GET,endpoint,params,headers,clearCache||!1)},service.post=function(endpoint,params,headers,clearCache){return query(_methods.POST,endpoint,params,headers,clearCache||!1)},service["delete"]=function(endpoint,params,headers,clearCache){return query(_methods.DELETE,endpoint,params,headers,clearCache||!1)},service.put=function(endpoint,params,headers,clearCache){return query(_methods.PUT,endpoint,params,headers,clearCache||!1)},service.url=function(){return _url},service}angular.module("cjwApiWrapper",[]).provider("apiUrl",[APIUrlProvider]).factory("apiWrapper",["$log","$http","$cacheFactory","$q","apiUrl",APIWrapperService])}();